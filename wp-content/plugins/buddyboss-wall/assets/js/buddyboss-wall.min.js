function budyboss_wall_comment_like_unlike(e){if(jq=jQuery,e=jq(e),e.hasClass("fav-comment")||e.hasClass("unfav-comment")){var t=e.hasClass("fav-comment")?"fav":"unfav",r=e.closest("[id^=acomment-]"),i=r.attr("id").substr(9,r.attr("id").length);e.addClass("loading"),jq.post(ajaxurl,{action:"activity_mark_"+t,cookie:bp_get_cookies(),id:i,item_type:"comment"},function(r){e.removeClass("loading"),e.fadeOut(200,function(){jq(this).html(r),jq(this).attr("title","fav"==t?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav),jq(this).fadeIn(200)}),"fav"==t?(jq(".item-list-tabs #activity-favs-personal-li").length||(jq(".item-list-tabs #activity-favorites").length||jq(".item-list-tabs ul #activity-mentions").before('<li id="activity-favorites"><a href="#">'+BP_DTheme.my_favs+" <span>0</span></a></li>"),jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())+1)),e.removeClass("fav-comment"),e.addClass("unfav-comment")):(e.removeClass("unfav-comment"),e.addClass("fav-comment"),jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())-1),Number(jq(".item-list-tabs ul #activity-favorites span").html())||(jq(".item-list-tabs ul #activity-favorites").hasClass("selected")&&bp_activity_request(null,null),jq(".item-list-tabs ul #activity-favorites").remove()))})}return!1}function bb_url_scrapeURL(e){var t="";if(e.indexOf("http://")>=0?t=bb_url_getUrl("http://",e):e.indexOf("https://")>=0?t=bb_url_getUrl("https://",e):e.indexOf("www.")>=0&&(t=bb_url_getUrl("www",e)),""!=t){var r=document.createElement("a");r.href=t;var i=r.hostname;-1!=window.Code.BuddyBoss_Wall_Util.state.excluded_oembed_hosts.indexOf(i)&&(t="")}return""===t?(jQuery("#bb-url-scrapper").hide(),void jQuery(".bb-url-scrapper-container").hide()):void bb_load_url_preview(t)}function bb_load_url_preview(e){bb_is_valid_url(e)&&bb_url_getUrlData(e)}function bb_url_abortTimer(){null!=bb_url_tid&&clearTimeout(bb_url_tid)}function bb_url_getUrlData(e){jQuery("#whats-new-submit input").prop("disabled",!0),jQuery(".bb-url-scrapper-container").show(),jQuery(".bb-url-scrapper-loading").show(),jQuery("#bb-url-scrapper").hide(),jQuery("#bb-url-error").hide();var t={action:"bb_url_parser",url:e};jQuery.ajax({url:ajaxurl,data:t,type:"POST",dataType:"json",success:function(t){if(jQuery("#whats-new-submit input").prop("disabled",!1),""==t.title)return void jQuery(".bb-url-scrapper-container").hide();if(jQuery(".bb-url-scrapper-loading").hide(),""==t.error){jQuery("#bb-url-error").hide(),jQuery("#bb-url-scrapper").show(),bb_urlInUse=e;var r="";jQuery("#bb-url-scrapper-description").text(""),jQuery("#bb-url-scrapper-description-hidden").val(""),jQuery("#bb-url-scrapper-title").text(""),jQuery("#bb-url-scrapper-title-hidden").val(""),jQuery("#bb-url-scrapper-url").text(""),jQuery("#bb-url-scrapper-url-hidden").val(""),jQuery("#bb-url-scrapper-img").css("backgroundImage",""),bb_url_imgSrcArray=[],bb_url_imgArrayCounter=0,r=t.title,jQuery("#bb-url-scrapper-title").html(r),jQuery("#bb-url-scrapper-title-hidden").val(r),jQuery("#bb-url-scrapper-url").text(e),jQuery("#bb-url-scrapper-url-hidden").val(e),jQuery("#bb-url-scrapper-description").text(t.description),jQuery("#bb-url-scrapper-description-hidden").val(t.description),jQuery.each(t.images,function(e,t){bb_url_imgSrcArray.push(t)})}else jQuery("#bb-url-error").text(t.error),jQuery(".bb-url-scrapper-container").hide(),jQuery("#bb-url-error").show();jQuery("#bb-url-scrapper-img").find("img").attr("src",bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-hidden").val(bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-count").text("1 of "+bb_url_imgSrcArray.length)}})}function bb_is_valid_url(e){var t=/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/;return t.test(e)}function bb_url_getUrl(e,t){for(var r="",i=t.indexOf(e),a=i;a<t.length&&(" "!=t[a]&&"\n"!=t[a]);a++)r+=t[a];return"www"===e&&(e="http://",r=e+r),r}var jq=$=jQuery;window.Code=window.Code||{},window.Code.BuddyBoss_Wall_Util=function(e,t,r){var i={state:r,lang:function(e){var e=e||"undefined key!";return r[e]||"Language key missing for: "+e}};return i}(window,window.jQuery,window.BuddyBoss_Wall_Appstate||!1),window.Code.BuddyBoss_Wall=function(e,t,r,i){var a=r.state||{},l=(r.lang,{on:null,setup_form:function(){var e=t("#buddyboss-wall-tpl-form"),r=t("body.just-me.has-activity #item-body > .activity").first(),i=t("#whats-new-form");!i.length&&e.length&&r.length},setup_comments:function(){var e=t(".buddyboss-wall-tpl-activity-comments");e.each(function(){var e=t(this),r=e.parent().find(".activity-comments");r.length&&!e.data("buddyboss-wall-appended")&&(e.data("buddyboss-wall-appended",!0),r.prepend(e.html()))})},setup_link_previews:function(){jQuery("#whats-new").addClass("bblinkBox"),jQuery("#whats-new-textarea").append('<div class="bb-url-scrapper-container"><i class="bb-url-scrapper-loading buddyboss-wall-ajax-loader fa fa-spinner"></i><div id="bb-url-scrapper"><div id="bb-url-scrapper-img-holder"><div id="bb-url-scrapper-img"><img src="" /><a title="Cancel Preview Image" href="#" id="bbimagecloselinksuggestion"><i class="fa fa-times"></i></a></div><div class="bb-url-thumb-nav"><input type="button" id="bb-url-prevPicButton" value="<" /><input type="button" id="bb-url-nextPicButton" value=">"><div id="bb-url-scrapper-img-count"></div></div></div><div id="bb-url-scrapper-text-holder"><div id="bb-url-scrapper-title"></div><div id="bb-url-scrapper-url"></div><div id="bb-url-scrapper-description"></div><div id="bb-url-error"></div><a title="Cancel Preview" href="#" id="bbcloselinksuggestion"><i class="fa fa-times"></i></a></div></div></div>'),jQuery("#whats-new-form").append('<input type="hidden" id="bb-url-scrapper-img-hidden" name="bb-url-scrapper-img-hidden" value="" /><input type="hidden" id="bb-url-scrapper-title-hidden"  name="bb-url-scrapper-title-hidden" value="" /><input type="hidden" id="bb-url-scrapper-url-hidden" name="bb-url-scrapper-url-hidden" value="" /><input type="hidden" id="bb-url-scrapper-description-hidden" name="bb-url-scrapper-description-hidden" value="" /><input type="hidden" id="bb-url-no-scrapper" name="bb-url-no-scrapper" value="1" />'),jQuery("#bb-url-scrapper").hide(),jQuery("#bb-url-nextPicButton").click(function(){bb_url_imgArrayCounter++,bb_url_imgArrayCounter>=bb_url_imgSrcArray.length&&(bb_url_imgArrayCounter=0),jQuery("#bb-url-scrapper-img").find("img").attr("src",bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-hidden").val(bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-count").text(bb_url_imgArrayCounter+1+" of "+bb_url_imgSrcArray.length)}),jQuery("#bb-url-prevPicButton").click(function(){bb_url_imgArrayCounter--,0>bb_url_imgArrayCounter&&(bb_url_imgArrayCounter=bb_url_imgSrcArray.length-1),jQuery("#bb-url-scrapper-img").find("img").attr("src",bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-hidden").val(bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-count").text(bb_url_imgArrayCounter+1+" of "+bb_url_imgSrcArray.length)}),jQuery("#bbimagecloselinksuggestion").click(function(e){e.preventDefault(),jQuery("#bb-url-scrapper-img-holder").hide(),jQuery("#bb-url-scrapper-img-hidden").val("")}),jQuery("#bbcloselinksuggestion").click(function(e){e.preventDefault(),jQuery(".bb-url-scrapper-container").hide(),jQuery("#bb-url-no-scrapper").val("1"),jQuery("#bb-url-scrapper-description").text(""),jQuery("#bb-url-scrapper-description-hidden").val(""),jQuery("#bb-url-scrapper-title").text(""),jQuery("#bb-url-scrapper-title-hidden").val(""),jQuery("#bb-url-scrapper-url").text(""),jQuery("#bb-url-scrapper-url-hidden").val(""),jQuery("#bb-url-scrapper-img").css("backgroundImage","")}),jQuery(".bblinkBox").on("keyup",function(e){"1"===jQuery("#bb-url-no-scrapper").val()&&(urlText=this.value,bb_url_abortTimer(),bb_url_tid=setTimeout(function(){bb_url_scrapeURL(urlText)},1e3),13==e.which&&this.rows++)})},setup:function(){l.on=!0,t.ajaxPrefilter(l.prefilter),t(document).ajaxSuccess(function(){l.setup_comments(),setTimeout(l.setup_comments,205),setTimeout(l.setup_comments,500)}),l.setup_form(),l.setup_comments(),a.enabled_link_preview&&l.setup_link_previews();var e=t("#buddyboss-wall-tpl-greeting").html(),r=t("#whats-new-form .activity-greeting");r.length&&e&&r.html(e).show()},teardown:function(){l.on=!1},prefilter:function(e,r){item_type=r.data&&r.data.item_type||"";var i,s=parseInt(r.data&&r.data.id||0),n=r.data&&r.data.action||"",u="activity_mark_fav"===n||"activity_mark_unfav"===n,o="post_update"===n,b="comment"===item_type;o&&a.enabled_link_preview&&(i=t("#bb-url-scrapper-url").html().length,i>0&&(e.data+="&bb_link_url="+encodeURIComponent(t("#bb-url-scrapper-url-hidden").val()),e.data+="&bb_link_title="+encodeURIComponent(t("#bb-url-scrapper-title-hidden").val()),e.data+="&bb_link_img="+encodeURIComponent(t("#bb-url-scrapper-img-hidden").val()),e.data+="&bb_link_description="+encodeURIComponent(t("#bb-url-scrapper-description-hidden").val()),t(".bb-url-scrapper-container").hide(),t("#bb-url-no-scrapper").val("1"),t("#bb-url-scrapper-description").text(""),t("#bb-url-scrapper-description-hidden").val(""),t("#bb-url-scrapper-title").text(""),t("#bb-url-scrapper-title-hidden").val(""),t("#bb-url-scrapper-url").text(""),t("#bb-url-scrapper-url-hidden").val(""),t("#bb-url-scrapper-img").css("backgroundImage",""))),u&&s>0&&(i=t("#activity-"+s).find(".button.loading"),type=i.hasClass("fav")?"fav":"unfav",b&&(i=t("#acomment-"+s).find(".acomment-like.loading"),type=i.hasClass("fav-comment")?"fav":"unfav"),e.success=function(e){return function(r,a,s){r[0]+r[1]==="-1"&&t.isFunction(e)?e(r):l.success(i,type,b,r,a,s)}}(e.success))},success:function(e,t,r,a){var l=!1,s="",n="",u=0,o=!1,b=-1!=a.indexOf("{")?jQuery.parseJSON(a):!1;if(s=b&&b.but_text?b.but_text:a,b&&b.hasOwnProperty("like_count")&&(b.like_count?(l=!0,n=b.num_likes):o=!0),e.fadeOut(200,function(){var e=jq(this),i=e.parents(".activity-item"),a=i.find(".activity-comments"),u=a.find("ul").first(),b=a.find(".activity-like-count:not(.reply-like-count)"),c=a.find("li").not(".activity-like-count"),p=n;r&&(a=e.parents(".acomment-options"),u=a.find("ul").first(),b=a.find(".activity-like-count"),c=a.find("li").not(".activity-like-count"),p=n),e.html(s),e.attr("title","fav"==t?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav),e.fadeIn(200),b.remove(),l&&(u.length?u.prepend(p):r?a.append('<ul class="acomment-reply-like-content">'+p+"</ul>"):a.prepend("<ul>"+p+"</ul>")),o&&u.length&&!c.length&&u.remove()}),"fav"==t){var c=jq(".item-list-tabs ul #activity-favorites span").html();c!=i&&(u=Number(c.replace(/,/g,""))+1),jq(".item-list-tabs #activity-favorites").length||jq(".item-list-tabs ul li#activity-mentions").before('<li id="activity-favorites"><a href="#" class="localized">'+BP_DTheme.my_favs+" <span>0</span></a></li>"),r?(e.removeClass("fav-comment"),e.addClass("unfav-comment")):(e.removeClass("fav"),e.addClass("unfav")),jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())+1)}else{var c=jq(".item-list-tabs ul #activity-favorites span").html();c!=i&&(u=Number(c.replace(/,/g,""))-1),r?(e.removeClass("unfav-comment"),e.addClass("fav-comment")):(e.removeClass("unfav"),e.addClass("fav")),c&&jq(".item-list-tabs ul #activity-favorites span").html(u),0==u&&(jq(".item-list-tabs ul #activity-favorites").hasClass("selected")&&bp_activity_request(null,null),jq(".item-list-tabs ul #activity-favorites").remove())}"activity-favorites"==jq(".item-list-tabs li.selected").attr("id")&&e.closest(".activity-item").slideUp(100),e.removeClass("loading")}});t(document).ready(function(){l.setup(),jQuery.ajax=function(e){function t(e){return!a.test(e)&&/:\/\//.test(e)}var r=location.protocol,i=location.hostname,a=RegExp(r+"//"+i),l="http"+(/^https/.test(r)?"s":"")+"://query.yahooapis.com/v1/public/yql?callback=?",s='select * from html where url="{URL}" and xpath="*"';return function(r){var i=r.url;return/get/i.test(r.type)&&!/json/i.test(r.dataType)&&t(i)&&(r.url=l,r.dataType="json",r.data={q:s.replace("{URL}",i+(r.data?(/\?/.test(i)?"&":"?")+jQuery.param(r.data):"")),format:"xml"},!r.success&&r.complete&&(r.success=r.complete,delete r.complete),r.success=function(e){return function(t){e&&e.call(this,{responseText:(t.results[0]||"").replace(/<script[^>]+?\/>|<script(.|\s)*?\/script>/gi,"")},"success")}}(r.success)),e.apply(this,arguments)}}(jQuery.ajax),String.prototype.startsWith=function(e){return this.match("^"+e)==e}});var s={setup:function(){l.setup()},teardown:function(){l.teardown()}};return s}(window,window.jQuery,window.Code.BuddyBoss_Wall_Util),function(e,t,r){var i={ajaxResetTimeout:201},a=r.state||{},l=(r.lang,{}),s={};l.init=function(){s.document=t(document),s.document.ajaxSuccess(l.ajaxSuccessListener),l.initTooltips(),BP_DTheme&&a&&t.extend(BP_DTheme,a)},l.ajaxSuccessListener=function(){l.destroyTooltips(),e.setTimeout(l.initTooltips,i.ajaxResetTimeout)},l.destroyTooltips=function(){s.tooltips&&s.tooltips.length&&(s.tooltips.tooltipster("destroy"),s.tooltips=null)},l.initTooltips=function(){s.tooltips=t(".buddyboss-wall-tt-others"),s.tooltips.length&&s.tooltips.tooltipster({contentAsHTML:!0,functionInit:l.getTooltipContent,interactive:!0,position:"top-left",theme:"tooltipster-buddyboss"})},l.getTooltipContent=function(e){var t=e.parent().find(".buddyboss-wall-tt-content").detach().html();return t},a.load_tooltips&&(l.load_tooltips=!0),jQuery(document).ready(function(){l.load_tooltips===!0&&l.initTooltips()})}(window,window.jQuery,window.Code.BuddyBoss_Wall_Util);var bb_url_imgSrcArray=[],bb_url_imgArrayCounter=0,bb_url_tid;